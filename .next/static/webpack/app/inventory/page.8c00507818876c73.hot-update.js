"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/inventory/page",{

/***/ "(app-pages-browser)/./src/hooks/useSyncManager.ts":
/*!*************************************!*\
  !*** ./src/hooks/useSyncManager.ts ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSyncManager: () => (/* binding */ useSyncManager)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(app-pages-browser)/./src/lib/db.ts\");\n/* harmony import */ var _contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/contexts/AuthContext */ \"(app-pages-browser)/./src/contexts/AuthContext.tsx\");\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/./node_modules/next/dist/build/polyfills/process.js\");\n/* __next_internal_client_entry_do_not_use__ useSyncManager auto */ /**\n * useSyncManager - The Heart of Offline-First Sync.\n * - Listens to navigator.onLine; on reconnection runs pull then push.\n * - Pull: GET /sync/pull?tenant_id=&max_version_id= → apply delta to Dexie (server wins for products).\n * - Push: POST /sync with SyncQueue items → server processes in transaction, returns version_id.\n */ \n\n\nconst SYNC_META_KEY_MAX_VERSION = 'local_max_version_id';\nconst SIMULATE_OFFLINE_KEY = 'bluecounts_simulate_offline';\nconst API_BASE = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001';\nfunction getSimulateOffline() {\n    if (false) {}\n    return localStorage.getItem(SIMULATE_OFFLINE_KEY) === '1';\n}\nfunction authHeaders() {\n    const token = (0,_contexts_AuthContext__WEBPACK_IMPORTED_MODULE_2__.getAuthToken)();\n    const h = {\n        'Content-Type': 'application/json'\n    };\n    if (token) h['Authorization'] = \"Bearer \".concat(token);\n    return h;\n}\nfunction useSyncManager(param) {\n    let { tenantId, outletId, deviceId, enabled = true } = param;\n    const [isOnline, setIsOnline] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)( true ? window.navigator.onLine : 0);\n    const [syncState, setSyncState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('idle');\n    const [lastError, setLastError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [pendingCount, setPendingCount] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n    const getMaxVersion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSyncManager.useCallback[getMaxVersion]\": async ()=>{\n            const row = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_meta.get(SYNC_META_KEY_MAX_VERSION);\n            const v = row === null || row === void 0 ? void 0 : row.value;\n            if (typeof v === 'number') return v;\n            if (typeof v === 'string') return parseInt(v, 10) || 0;\n            return 0;\n        }\n    }[\"useSyncManager.useCallback[getMaxVersion]\"], []);\n    const setMaxVersion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSyncManager.useCallback[setMaxVersion]\": async (version)=>{\n            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_meta.put({\n                key: SYNC_META_KEY_MAX_VERSION,\n                value: version\n            });\n        }\n    }[\"useSyncManager.useCallback[setMaxVersion]\"], []);\n    const pull = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSyncManager.useCallback[pull]\": async function() {\n            let forceFullSync = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;\n            if (!tenantId) return;\n            setSyncState('pulling');\n            setLastError(null);\n            try {\n                var _tables_products, _tables_inventory, _tables_sales, _tables_sale_items, _tables_pos_sessions;\n                let maxVer = await getMaxVersion();\n                if (forceFullSync) {\n                    maxVer = 0;\n                } else {\n                    const hasLocalData = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.products.where('tenant_id').equals(tenantId).count();\n                    if (hasLocalData === 0) {\n                        maxVer = 0;\n                    }\n                }\n                const url = \"\".concat(API_BASE, \"/sync/pull?tenant_id=\").concat(encodeURIComponent(tenantId), \"&max_version_id=\").concat(maxVer);\n                const res = await fetch(url, {\n                    headers: authHeaders()\n                });\n                if (!res.ok) throw new Error(\"Pull failed: \".concat(res.status));\n                const data = await res.json();\n                const { tables, server_max_version_id } = data;\n                if ((_tables_products = tables.products) === null || _tables_products === void 0 ? void 0 : _tables_products.length) {\n                    for (const row of tables.products){\n                        if (row.deleted_at) {\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.products.update(row.id, {\n                                deleted_at: row.deleted_at,\n                                version_id: row.version_id\n                            });\n                        } else {\n                            var _row_description, _row_deleted_at;\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.products.put({\n                                id: row.id,\n                                tenant_id: row.tenant_id,\n                                sku: row.sku,\n                                name: row.name,\n                                description: (_row_description = row.description) !== null && _row_description !== void 0 ? _row_description : null,\n                                price: Number(row.price),\n                                version_id: row.version_id,\n                                created_at: row.created_at,\n                                updated_at: row.updated_at,\n                                deleted_at: (_row_deleted_at = row.deleted_at) !== null && _row_deleted_at !== void 0 ? _row_deleted_at : null\n                            });\n                        }\n                    }\n                }\n                if ((_tables_inventory = tables.inventory) === null || _tables_inventory === void 0 ? void 0 : _tables_inventory.length) {\n                    for (const row of tables.inventory){\n                        const productKey = [\n                            row.tenant_id,\n                            row.outlet_id,\n                            row.product_id\n                        ];\n                        const existing = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.inventory.where('[tenant_id+outlet_id+product_id]').equals(productKey).toArray();\n                        for (const e of existing){\n                            if (e.id !== row.id) await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.inventory.delete(e.id);\n                        }\n                        if (row.deleted_at) {\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.inventory.update(row.id, {\n                                deleted_at: row.deleted_at,\n                                version_id: row.version_id\n                            });\n                        } else {\n                            var _row_deleted_at1;\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.inventory.put({\n                                id: row.id,\n                                tenant_id: row.tenant_id,\n                                outlet_id: row.outlet_id,\n                                product_id: row.product_id,\n                                quantity: Number(row.quantity),\n                                version_id: row.version_id,\n                                created_at: row.created_at,\n                                updated_at: row.updated_at,\n                                deleted_at: (_row_deleted_at1 = row.deleted_at) !== null && _row_deleted_at1 !== void 0 ? _row_deleted_at1 : null\n                            });\n                        }\n                    }\n                }\n                if ((_tables_sales = tables.sales) === null || _tables_sales === void 0 ? void 0 : _tables_sales.length) {\n                    for (const row of tables.sales){\n                        if (row.deleted_at) {\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sales.update(row.id, {\n                                deleted_at: row.deleted_at,\n                                version_id: row.version_id\n                            });\n                        } else {\n                            var _row_session_id, _row_deleted_at2;\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sales.put({\n                                id: row.id,\n                                tenant_id: row.tenant_id,\n                                outlet_id: row.outlet_id,\n                                device_id: row.device_id,\n                                session_id: (_row_session_id = row.session_id) !== null && _row_session_id !== void 0 ? _row_session_id : null,\n                                device_transaction_id: row.device_transaction_id,\n                                total_amount: Number(row.total_amount),\n                                version_id: row.version_id,\n                                created_at: row.created_at,\n                                updated_at: row.updated_at,\n                                deleted_at: (_row_deleted_at2 = row.deleted_at) !== null && _row_deleted_at2 !== void 0 ? _row_deleted_at2 : null\n                            });\n                        }\n                    }\n                }\n                if ((_tables_sale_items = tables.sale_items) === null || _tables_sale_items === void 0 ? void 0 : _tables_sale_items.length) {\n                    for (const row of tables.sale_items){\n                        if (row.deleted_at) {\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sale_items.update(row.id, {\n                                deleted_at: row.deleted_at,\n                                version_id: row.version_id\n                            });\n                        } else {\n                            var _row_deleted_at3;\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sale_items.put({\n                                id: row.id,\n                                tenant_id: row.tenant_id,\n                                outlet_id: row.outlet_id,\n                                sale_id: row.sale_id,\n                                product_id: row.product_id,\n                                quantity: row.quantity,\n                                unit_price: Number(row.unit_price),\n                                line_total: Number(row.line_total),\n                                version_id: row.version_id,\n                                created_at: row.created_at,\n                                deleted_at: (_row_deleted_at3 = row.deleted_at) !== null && _row_deleted_at3 !== void 0 ? _row_deleted_at3 : null\n                            });\n                        }\n                    }\n                }\n                if ((_tables_pos_sessions = tables.pos_sessions) === null || _tables_pos_sessions === void 0 ? void 0 : _tables_pos_sessions.length) {\n                    for (const row of tables.pos_sessions){\n                        if (row.deleted_at) {\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.pos_sessions.update(row.id, {\n                                deleted_at: row.deleted_at,\n                                version_id: row.version_id\n                            });\n                        } else {\n                            var _row_device_id, _row_closed_at, _row_deleted_at4;\n                            await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.pos_sessions.put({\n                                id: row.id,\n                                tenant_id: row.tenant_id,\n                                outlet_id: row.outlet_id,\n                                user_id: row.user_id,\n                                device_id: (_row_device_id = row.device_id) !== null && _row_device_id !== void 0 ? _row_device_id : null,\n                                opening_balance: Number(row.opening_balance),\n                                closing_balance: row.closing_balance != null ? Number(row.closing_balance) : null,\n                                expected_balance: row.expected_balance != null ? Number(row.expected_balance) : null,\n                                status: row.status === 'closed' ? 'closed' : 'open',\n                                opened_at: row.opened_at,\n                                closed_at: (_row_closed_at = row.closed_at) !== null && _row_closed_at !== void 0 ? _row_closed_at : null,\n                                version_id: row.version_id,\n                                deleted_at: (_row_deleted_at4 = row.deleted_at) !== null && _row_deleted_at4 !== void 0 ? _row_deleted_at4 : null\n                            });\n                        }\n                    }\n                }\n                if (typeof server_max_version_id === 'number') {\n                    await setMaxVersion(server_max_version_id);\n                }\n            } catch (e) {\n                const msg = e instanceof Error ? e.message : 'Pull failed';\n                setLastError(msg);\n                setSyncState('error');\n                return;\n            }\n            setSyncState('idle');\n        }\n    }[\"useSyncManager.useCallback[pull]\"], [\n        tenantId,\n        outletId,\n        getMaxVersion,\n        setMaxVersion\n    ]);\n    const push = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSyncManager.useCallback[push]\": async ()=>{\n            if (!tenantId || !outletId || !deviceId) return;\n            const pending = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.where('status').equals('pending').toArray();\n            if (pending.length === 0) {\n                setPendingCount(0);\n                return;\n            }\n            setSyncState('pushing');\n            setLastError(null);\n            try {\n                const items = pending.map({\n                    \"useSyncManager.useCallback[push].items\": (q)=>({\n                            id: q.id,\n                            action_type: q.action_type,\n                            payload: q.payload\n                        })\n                }[\"useSyncManager.useCallback[push].items\"]);\n                const res = await fetch(\"\".concat(API_BASE, \"/sync\"), {\n                    method: 'POST',\n                    headers: authHeaders(),\n                    body: JSON.stringify({\n                        tenant_id: tenantId,\n                        outlet_id: outletId,\n                        device_id: deviceId,\n                        items\n                    })\n                });\n                if (!res.ok) {\n                    const errBody = await res.text();\n                    throw new Error(errBody || \"Push failed: \".concat(res.status));\n                }\n                const data = await res.json();\n                if (data.version_id != null) await setMaxVersion(data.version_id);\n                for (const r of data.results || []){\n                    if (r.status === 'accepted' || r.status === 'synced') {\n                        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.update(r.queue_id, {\n                            status: 'synced'\n                        });\n                    } else if (r.status === 'failed') {\n                        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.update(r.queue_id, {\n                            status: 'failed',\n                            error_message: r.error\n                        });\n                    }\n                }\n                const stillPending = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.where('status').equals('pending').count();\n                setPendingCount(stillPending);\n            } catch (e) {\n                const msg = e instanceof Error ? e.message : 'Push failed';\n                setLastError(msg);\n                setSyncState('error');\n                return;\n            }\n            setSyncState('idle');\n            const stillPending = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.where('status').equals('pending').count();\n            setPendingCount(stillPending);\n        }\n    }[\"useSyncManager.useCallback[push]\"], [\n        tenantId,\n        outletId,\n        deviceId,\n        setMaxVersion\n    ]);\n    const sync = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)({\n        \"useSyncManager.useCallback[sync]\": async ()=>{\n            if (!enabled) return;\n            await pull(true);\n            await push();\n            await pull(true);\n        }\n    }[\"useSyncManager.useCallback[sync]\"], [\n        enabled,\n        pull,\n        push\n    ]);\n    // When online, do a full pull on page load so we get all DB rows (products with low version_id are never sent on incremental pull).\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSyncManager.useEffect\": ()=>{\n            if ( false || !enabled || !tenantId) return;\n            if (window.navigator.onLine) {\n                pull(true);\n            }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        }\n    }[\"useSyncManager.useEffect\"], [\n        tenantId,\n        enabled\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSyncManager.useEffect\": ()=>{\n            if (false) {}\n            const handleOnline = {\n                \"useSyncManager.useEffect.handleOnline\": ()=>{\n                    setIsOnline(true);\n                    if (enabled && tenantId) sync();\n                }\n            }[\"useSyncManager.useEffect.handleOnline\"];\n            const handleOffline = {\n                \"useSyncManager.useEffect.handleOffline\": ()=>setIsOnline(false)\n            }[\"useSyncManager.useEffect.handleOffline\"];\n            window.addEventListener('online', handleOnline);\n            window.addEventListener('offline', handleOffline);\n            return ({\n                \"useSyncManager.useEffect\": ()=>{\n                    window.removeEventListener('online', handleOnline);\n                    window.removeEventListener('offline', handleOffline);\n                }\n            })[\"useSyncManager.useEffect\"];\n        }\n    }[\"useSyncManager.useEffect\"], [\n        enabled,\n        tenantId,\n        sync\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useSyncManager.useEffect\": ()=>{\n            let cancelled = false;\n            _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.where('status').equals('pending').count().then({\n                \"useSyncManager.useEffect\": (c)=>{\n                    if (!cancelled) setPendingCount(c);\n                }\n            }[\"useSyncManager.useEffect\"]);\n            const interval = setInterval({\n                \"useSyncManager.useEffect.interval\": ()=>{\n                    _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.sync_queue.where('status').equals('pending').count().then({\n                        \"useSyncManager.useEffect.interval\": (c)=>{\n                            if (!cancelled) setPendingCount(c);\n                        }\n                    }[\"useSyncManager.useEffect.interval\"]);\n                }\n            }[\"useSyncManager.useEffect.interval\"], 2000);\n            return ({\n                \"useSyncManager.useEffect\": ()=>{\n                    cancelled = true;\n                    clearInterval(interval);\n                }\n            })[\"useSyncManager.useEffect\"];\n        }\n    }[\"useSyncManager.useEffect\"], []);\n    return {\n        isOnline,\n        syncState,\n        lastError,\n        pendingCount,\n        sync,\n        pull,\n        push\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9ob29rcy91c2VTeW5jTWFuYWdlci50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7b0VBRUE7Ozs7O0NBS0MsR0FFd0Q7QUFDTDtBQUNFO0FBRXRELE1BQU1LLDRCQUE0QjtBQUNsQyxNQUFNQyx1QkFBdUI7QUFDN0IsTUFBTUMsV0FBV0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxtQkFBbUIsSUFBSTtBQUVwRCxTQUFTQztJQUNQLElBQUksS0FBNkIsRUFBRSxFQUFhO0lBQ2hELE9BQU9DLGFBQWFDLE9BQU8sQ0FBQ1AsMEJBQTBCO0FBQ3hEO0FBRUEsU0FBU1E7SUFDUCxNQUFNQyxRQUFRWCxtRUFBWUE7SUFDMUIsTUFBTVksSUFBaUI7UUFBRSxnQkFBZ0I7SUFBbUI7SUFDNUQsSUFBSUQsT0FBTyxDQUE2QixDQUFDLGdCQUFnQixHQUFHLFVBQWdCLE9BQU5BO0lBQ3RFLE9BQU9DO0FBQ1Q7QUFXTyxTQUFTQyxlQUFlLEtBQXVFO1FBQXZFLEVBQUVDLFFBQVEsRUFBRUMsUUFBUSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsSUFBSSxFQUF5QixHQUF2RTtJQUM3QixNQUFNLENBQUNDLFVBQVVDLFlBQVksR0FBR3JCLCtDQUFRQSxDQUN0QyxLQUE2QixHQUFHc0IsT0FBT0MsU0FBUyxDQUFDQyxNQUFNLEdBQUcsQ0FBSTtJQUVoRSxNQUFNLENBQUNDLFdBQVdDLGFBQWEsR0FBRzFCLCtDQUFRQSxDQUFZO0lBQ3RELE1BQU0sQ0FBQzJCLFdBQVdDLGFBQWEsR0FBRzVCLCtDQUFRQSxDQUFnQjtJQUMxRCxNQUFNLENBQUM2QixjQUFjQyxnQkFBZ0IsR0FBRzlCLCtDQUFRQSxDQUFDO0lBRWpELE1BQU0rQixnQkFBZ0JqQyxrREFBV0E7cURBQUM7WUFDaEMsTUFBTWtDLE1BQU0sTUFBTS9CLHVDQUFFQSxDQUFDZ0MsU0FBUyxDQUFDQyxHQUFHLENBQUMvQjtZQUNuQyxNQUFNZ0MsSUFBSUgsZ0JBQUFBLDBCQUFBQSxJQUFLSSxL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T0FBT3VHLGdCQUFnQixDQUFDLFdBQVdEO1lBQ25DOzRDQUFPO29CQUNMdEcsT0FBT3dHLG1CQUFtQixDQUFDLFVBQVVIO29CQUNyQ3JHLE9BQU93RyxtQkFBbUIsQ0FBQyxXQUFXRjtnQkFDeEM7O1FBQ0Y7bUNBQUc7UUFBQ3pHO1FBQVNIO1FBQVUwRztLQUFLO0lBRTVCM0gsZ0RBQVNBO29DQUFDO1lBQ1IsSUFBSWdJLFlBQVk7WUFDaEI5SCx1Q0FBRUEsQ0FBQ3VHLFVBQVUsQ0FBQ3hELEtBQUssQ0FBQyxVQUFVQyxNQUFNLENBQUMsV0FBV0MsS0FBSyxHQUFHOEUsSUFBSTs0Q0FBQyxDQUFDQztvQkFDNUQsSUFBSSxDQUFDRixXQUFXakcsZ0JBQWdCbUc7Z0JBQ2xDOztZQUNBLE1BQU1DLFdBQVdDO3FEQUFZO29CQUMzQmxJLHVDQUFFQSxDQUFDdUcsVUFBVSxDQUFDeEQsS0FBSyxDQUFDLFVBQVVDLE1BQU0sQ0FBQyxXQUFXQyxLQUFLLEdBQUc4RSxJQUFJOzZEQUFDLENBQUNDOzRCQUM1RCxJQUFJLENBQUNGLFdBQVdqRyxnQkFBZ0JtRzt3QkFDbEM7O2dCQUNGO29EQUFHO1lBQ0g7NENBQU87b0JBQ0xGLFlBQVk7b0JBQ1pLLGNBQWNGO2dCQUNoQjs7UUFDRjttQ0FBRyxFQUFFO0lBRUwsT0FBTztRQUNMOUc7UUFDQUs7UUFDQUU7UUFDQUU7UUFDQTZGO1FBQ0FoRjtRQUNBNEQ7SUFDRjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvdGltb3RoeWVkaWJvL3Byb2plY3RzL3BlcnNvbmFsL2JsdWVjb3VudHMvZnJvbnRlbmQvc3JjL2hvb2tzL3VzZVN5bmNNYW5hZ2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50JztcblxuLyoqXG4gKiB1c2VTeW5jTWFuYWdlciAtIFRoZSBIZWFydCBvZiBPZmZsaW5lLUZpcnN0IFN5bmMuXG4gKiAtIExpc3RlbnMgdG8gbmF2aWdhdG9yLm9uTGluZTsgb24gcmVjb25uZWN0aW9uIHJ1bnMgcHVsbCB0aGVuIHB1c2guXG4gKiAtIFB1bGw6IEdFVCAvc3luYy9wdWxsP3RlbmFudF9pZD0mbWF4X3ZlcnNpb25faWQ9IOKGkiBhcHBseSBkZWx0YSB0byBEZXhpZSAoc2VydmVyIHdpbnMgZm9yIHByb2R1Y3RzKS5cbiAqIC0gUHVzaDogUE9TVCAvc3luYyB3aXRoIFN5bmNRdWV1ZSBpdGVtcyDihpIgc2VydmVyIHByb2Nlc3NlcyBpbiB0cmFuc2FjdGlvbiwgcmV0dXJucyB2ZXJzaW9uX2lkLlxuICovXG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgZGIsIHR5cGUgU3luY1F1ZXVlUmVjb3JkIH0gZnJvbSAnQC9saWIvZGInO1xuaW1wb3J0IHsgZ2V0QXV0aFRva2VuIH0gZnJvbSAnQC9jb250ZXh0cy9BdXRoQ29udGV4dCc7XG5cbmNvbnN0IFNZTkNfTUVUQV9LRVlfTUFYX1ZFUlNJT04gPSAnbG9jYWxfbWF4X3ZlcnNpb25faWQnO1xuY29uc3QgU0lNVUxBVEVfT0ZGTElORV9LRVkgPSAnYmx1ZWNvdW50c19zaW11bGF0ZV9vZmZsaW5lJztcbmNvbnN0IEFQSV9CQVNFID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAxJztcblxuZnVuY3Rpb24gZ2V0U2ltdWxhdGVPZmZsaW5lKCk6IGJvb2xlYW4ge1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNJTVVMQVRFX09GRkxJTkVfS0VZKSA9PT0gJzEnO1xufVxuXG5mdW5jdGlvbiBhdXRoSGVhZGVycygpOiBIZWFkZXJzSW5pdCB7XG4gIGNvbnN0IHRva2VuID0gZ2V0QXV0aFRva2VuKCk7XG4gIGNvbnN0IGg6IEhlYWRlcnNJbml0ID0geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH07XG4gIGlmICh0b2tlbikgKGggYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPilbJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0b2tlbn1gO1xuICByZXR1cm4gaDtcbn1cblxudHlwZSBTeW5jU3RhdGUgPSAnaWRsZScgfCAncHVsbGluZycgfCAncHVzaGluZycgfCAnZXJyb3InO1xuXG5leHBvcnQgaW50ZXJmYWNlIFVzZVN5bmNNYW5hZ2VyT3B0aW9ucyB7XG4gIHRlbmFudElkOiBzdHJpbmc7XG4gIG91dGxldElkOiBzdHJpbmc7XG4gIGRldmljZUlkOiBzdHJpbmc7XG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdXNlU3luY01hbmFnZXIoeyB0ZW5hbnRJZCwgb3V0bGV0SWQsIGRldmljZUlkLCBlbmFibGVkID0gdHJ1ZSB9OiBVc2VTeW5jTWFuYWdlck9wdGlvbnMpIHtcbiAgY29uc3QgW2lzT25saW5lLCBzZXRJc09ubGluZV0gPSB1c2VTdGF0ZShcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdy5uYXZpZ2F0b3Iub25MaW5lIDogdHJ1ZVxuICApO1xuICBjb25zdCBbc3luY1N0YXRlLCBzZXRTeW5jU3RhdGVdID0gdXNlU3RhdGU8U3luY1N0YXRlPignaWRsZScpO1xuICBjb25zdCBbbGFzdEVycm9yLCBzZXRMYXN0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwZW5kaW5nQ291bnQsIHNldFBlbmRpbmdDb3VudF0gPSB1c2VTdGF0ZSgwKTtcblxuICBjb25zdCBnZXRNYXhWZXJzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKCk6IFByb21pc2U8bnVtYmVyPiA9PiB7XG4gICAgY29uc3Qgcm93ID0gYXdhaXQgZGIuc3luY19tZXRhLmdldChTWU5DX01FVEFfS0VZX01BWF9WRVJTSU9OKTtcbiAgICBjb25zdCB2ID0gcm93Py52YWx1ZTtcbiAgICBpZiAodHlwZW9mIHYgPT09ICdudW1iZXInKSByZXR1cm4gdjtcbiAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VJbnQodiwgMTApIHx8IDA7XG4gICAgcmV0dXJuIDA7XG4gIH0sIFtdKTtcblxuICBjb25zdCBzZXRNYXhWZXJzaW9uID0gdXNlQ2FsbGJhY2soYXN5bmMgKHZlcnNpb246IG51bWJlcikgPT4ge1xuICAgIGF3YWl0IGRiLnN5bmNfbWV0YS5wdXQoeyBrZXk6IFNZTkNfTUVUQV9LRVlfTUFYX1ZFUlNJT04sIHZhbHVlOiB2ZXJzaW9uIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgcHVsbCA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChmb3JjZUZ1bGxTeW5jID0gZmFsc2UpID0+IHtcbiAgICAgIGlmICghdGVuYW50SWQpIHJldHVybjtcbiAgICAgIHNldFN5bmNTdGF0ZSgncHVsbGluZycpO1xuICAgICAgc2V0TGFzdEVycm9yKG51bGwpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IG1heFZlciA9IGF3YWl0IGdldE1heFZlcnNpb24oKTtcbiAgICAgICAgaWYgKGZvcmNlRnVsbFN5bmMpIHtcbiAgICAgICAgICBtYXhWZXIgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGhhc0xvY2FsRGF0YSA9IGF3YWl0IGRiLnByb2R1Y3RzLndoZXJlKCd0ZW5hbnRfaWQnKS5lcXVhbHModGVuYW50SWQpLmNvdW50KCk7XG4gICAgICAgICAgaWYgKGhhc0xvY2FsRGF0YSA9PT0gMCkge1xuICAgICAgICAgICAgbWF4VmVyID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXJsID0gYCR7QVBJX0JBU0V9L3N5bmMvcHVsbD90ZW5hbnRfaWQ9JHtlbmNvZGVVUklDb21wb25lbnQodGVuYW50SWQpfSZtYXhfdmVyc2lvbl9pZD0ke21heFZlcn1gO1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IGhlYWRlcnM6IGF1dGhIZWFkZXJzKCkgfSk7XG4gICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGBQdWxsIGZhaWxlZDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBjb25zdCB7IHRhYmxlcywgc2VydmVyX21heF92ZXJzaW9uX2lkIH0gPSBkYXRhO1xuXG4gICAgICBpZiAodGFibGVzLnByb2R1Y3RzPy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdGFibGVzLnByb2R1Y3RzKSB7XG4gICAgICAgICAgaWYgKHJvdy5kZWxldGVkX2F0KSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5wcm9kdWN0cy51cGRhdGUocm93LmlkLCB7IGRlbGV0ZWRfYXQ6IHJvdy5kZWxldGVkX2F0LCB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgZGIucHJvZHVjdHMucHV0KHtcbiAgICAgICAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgICAgICAgdGVuYW50X2lkOiByb3cudGVuYW50X2lkLFxuICAgICAgICAgICAgICBza3U6IHJvdy5za3UsXG4gICAgICAgICAgICAgIG5hbWU6IHJvdy5uYW1lLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcm93LmRlc2NyaXB0aW9uID8/IG51bGwsXG4gICAgICAgICAgICAgIHByaWNlOiBOdW1iZXIocm93LnByaWNlKSxcbiAgICAgICAgICAgICAgdmVyc2lvbl9pZDogcm93LnZlcnNpb25faWQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgICAgICAgZGVsZXRlZF9hdDogcm93LmRlbGV0ZWRfYXQgPz8gbnVsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRhYmxlcy5pbnZlbnRvcnk/Lmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHJvdyBvZiB0YWJsZXMuaW52ZW50b3J5KSB7XG4gICAgICAgICAgY29uc3QgcHJvZHVjdEtleSA9IFtyb3cudGVuYW50X2lkLCByb3cub3V0bGV0X2lkLCByb3cucHJvZHVjdF9pZF0gYXMgW3N0cmluZywgc3RyaW5nLCBzdHJpbmddO1xuICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZGIuaW52ZW50b3J5LndoZXJlKCdbdGVuYW50X2lkK291dGxldF9pZCtwcm9kdWN0X2lkXScpLmVxdWFscyhwcm9kdWN0S2V5KS50b0FycmF5KCk7XG4gICAgICAgICAgZm9yIChjb25zdCBlIG9mIGV4aXN0aW5nKSB7XG4gICAgICAgICAgICBpZiAoZS5pZCAhPT0gcm93LmlkKSBhd2FpdCBkYi5pbnZlbnRvcnkuZGVsZXRlKGUuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmRlbGV0ZWRfYXQpIHtcbiAgICAgICAgICAgIGF3YWl0IGRiLmludmVudG9yeS51cGRhdGUocm93LmlkLCB7IGRlbGV0ZWRfYXQ6IHJvdy5kZWxldGVkX2F0LCB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgZGIuaW52ZW50b3J5LnB1dCh7XG4gICAgICAgICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgICAgICAgIHRlbmFudF9pZDogcm93LnRlbmFudF9pZCxcbiAgICAgICAgICAgICAgb3V0bGV0X2lkOiByb3cub3V0bGV0X2lkLFxuICAgICAgICAgICAgICBwcm9kdWN0X2lkOiByb3cucHJvZHVjdF9pZCxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IE51bWJlcihyb3cucXVhbnRpdHkpLFxuICAgICAgICAgICAgICB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCxcbiAgICAgICAgICAgICAgY3JlYXRlZF9hdDogcm93LmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IHJvdy51cGRhdGVkX2F0LFxuICAgICAgICAgICAgICBkZWxldGVkX2F0OiByb3cuZGVsZXRlZF9hdCA/PyBudWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGFibGVzLnNhbGVzPy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdGFibGVzLnNhbGVzKSB7XG4gICAgICAgICAgaWYgKHJvdy5kZWxldGVkX2F0KSB7XG4gICAgICAgICAgICBhd2FpdCBkYi5zYWxlcy51cGRhdGUocm93LmlkLCB7IGRlbGV0ZWRfYXQ6IHJvdy5kZWxldGVkX2F0LCB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgZGIuc2FsZXMucHV0KHtcbiAgICAgICAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgICAgICAgdGVuYW50X2lkOiByb3cudGVuYW50X2lkLFxuICAgICAgICAgICAgICBvdXRsZXRfaWQ6IHJvdy5vdXRsZXRfaWQsXG4gICAgICAgICAgICAgIGRldmljZV9pZDogcm93LmRldmljZV9pZCxcbiAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogcm93LnNlc3Npb25faWQgPz8gbnVsbCxcbiAgICAgICAgICAgICAgZGV2aWNlX3RyYW5zYWN0aW9uX2lkOiByb3cuZGV2aWNlX3RyYW5zYWN0aW9uX2lkLFxuICAgICAgICAgICAgICB0b3RhbF9hbW91bnQ6IE51bWJlcihyb3cudG90YWxfYW1vdW50KSxcbiAgICAgICAgICAgICAgdmVyc2lvbl9pZDogcm93LnZlcnNpb25faWQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgICB1cGRhdGVkX2F0OiByb3cudXBkYXRlZF9hdCxcbiAgICAgICAgICAgICAgZGVsZXRlZF9hdDogcm93LmRlbGV0ZWRfYXQgPz8gbnVsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRhYmxlcy5zYWxlX2l0ZW1zPy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdGFibGVzLnNhbGVfaXRlbXMpIHtcbiAgICAgICAgICBpZiAocm93LmRlbGV0ZWRfYXQpIHtcbiAgICAgICAgICAgIGF3YWl0IGRiLnNhbGVfaXRlbXMudXBkYXRlKHJvdy5pZCwgeyBkZWxldGVkX2F0OiByb3cuZGVsZXRlZF9hdCwgdmVyc2lvbl9pZDogcm93LnZlcnNpb25faWQgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGF3YWl0IGRiLnNhbGVfaXRlbXMucHV0KHtcbiAgICAgICAgICAgICAgaWQ6IHJvdy5pZCxcbiAgICAgICAgICAgICAgdGVuYW50X2lkOiByb3cudGVuYW50X2lkLFxuICAgICAgICAgICAgICBvdXRsZXRfaWQ6IHJvdy5vdXRsZXRfaWQsXG4gICAgICAgICAgICAgIHNhbGVfaWQ6IHJvdy5zYWxlX2lkLFxuICAgICAgICAgICAgICBwcm9kdWN0X2lkOiByb3cucHJvZHVjdF9pZCxcbiAgICAgICAgICAgICAgcXVhbnRpdHk6IHJvdy5xdWFudGl0eSxcbiAgICAgICAgICAgICAgdW5pdF9wcmljZTogTnVtYmVyKHJvdy51bml0X3ByaWNlKSxcbiAgICAgICAgICAgICAgbGluZV90b3RhbDogTnVtYmVyKHJvdy5saW5lX3RvdGFsKSxcbiAgICAgICAgICAgICAgdmVyc2lvbl9pZDogcm93LnZlcnNpb25faWQsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IHJvdy5jcmVhdGVkX2F0LFxuICAgICAgICAgICAgICBkZWxldGVkX2F0OiByb3cuZGVsZXRlZF9hdCA/PyBudWxsLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGFibGVzLnBvc19zZXNzaW9ucz8ubGVuZ3RoKSB7XG4gICAgICAgIGZvciAoY29uc3Qgcm93IG9mIHRhYmxlcy5wb3Nfc2Vzc2lvbnMpIHtcbiAgICAgICAgICBpZiAocm93LmRlbGV0ZWRfYXQpIHtcbiAgICAgICAgICAgIGF3YWl0IGRiLnBvc19zZXNzaW9ucy51cGRhdGUocm93LmlkLCB7IGRlbGV0ZWRfYXQ6IHJvdy5kZWxldGVkX2F0LCB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgZGIucG9zX3Nlc3Npb25zLnB1dCh7XG4gICAgICAgICAgICAgIGlkOiByb3cuaWQsXG4gICAgICAgICAgICAgIHRlbmFudF9pZDogcm93LnRlbmFudF9pZCxcbiAgICAgICAgICAgICAgb3V0bGV0X2lkOiByb3cub3V0bGV0X2lkLFxuICAgICAgICAgICAgICB1c2VyX2lkOiByb3cudXNlcl9pZCxcbiAgICAgICAgICAgICAgZGV2aWNlX2lkOiByb3cuZGV2aWNlX2lkID8/IG51bGwsXG4gICAgICAgICAgICAgIG9wZW5pbmdfYmFsYW5jZTogTnVtYmVyKHJvdy5vcGVuaW5nX2JhbGFuY2UpLFxuICAgICAgICAgICAgICBjbG9zaW5nX2JhbGFuY2U6IHJvdy5jbG9zaW5nX2JhbGFuY2UgIT0gbnVsbCA/IE51bWJlcihyb3cuY2xvc2luZ19iYWxhbmNlKSA6IG51bGwsXG4gICAgICAgICAgICAgIGV4cGVjdGVkX2JhbGFuY2U6IHJvdy5leHBlY3RlZF9iYWxhbmNlICE9IG51bGwgPyBOdW1iZXIocm93LmV4cGVjdGVkX2JhbGFuY2UpIDogbnVsbCxcbiAgICAgICAgICAgICAgc3RhdHVzOiByb3cuc3RhdHVzID09PSAnY2xvc2VkJyA/ICdjbG9zZWQnIDogJ29wZW4nLFxuICAgICAgICAgICAgICBvcGVuZWRfYXQ6IHJvdy5vcGVuZWRfYXQsXG4gICAgICAgICAgICAgIGNsb3NlZF9hdDogcm93LmNsb3NlZF9hdCA/PyBudWxsLFxuICAgICAgICAgICAgICB2ZXJzaW9uX2lkOiByb3cudmVyc2lvbl9pZCxcbiAgICAgICAgICAgICAgZGVsZXRlZF9hdDogcm93LmRlbGV0ZWRfYXQgPz8gbnVsbCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIHNlcnZlcl9tYXhfdmVyc2lvbl9pZCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgYXdhaXQgc2V0TWF4VmVyc2lvbihzZXJ2ZXJfbWF4X3ZlcnNpb25faWQpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnN0IG1zZyA9IGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSA6ICdQdWxsIGZhaWxlZCc7XG4gICAgICBzZXRMYXN0RXJyb3IobXNnKTtcbiAgICAgIHNldFN5bmNTdGF0ZSgnZXJyb3InKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0U3luY1N0YXRlKCdpZGxlJyk7XG4gIH0sXG4gICAgW3RlbmFudElkLCBvdXRsZXRJZCwgZ2V0TWF4VmVyc2lvbiwgc2V0TWF4VmVyc2lvbl1cbiAgKTtcblxuICBjb25zdCBwdXNoID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIGlmICghdGVuYW50SWQgfHwgIW91dGxldElkIHx8ICFkZXZpY2VJZCkgcmV0dXJuO1xuICAgIGNvbnN0IHBlbmRpbmcgPSBhd2FpdCBkYi5zeW5jX3F1ZXVlLndoZXJlKCdzdGF0dXMnKS5lcXVhbHMoJ3BlbmRpbmcnKS50b0FycmF5KCk7XG4gICAgaWYgKHBlbmRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICBzZXRQZW5kaW5nQ291bnQoMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFN5bmNTdGF0ZSgncHVzaGluZycpO1xuICAgIHNldExhc3RFcnJvcihudWxsKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgaXRlbXMgPSBwZW5kaW5nLm1hcCgocTogU3luY1F1ZXVlUmVjb3JkKSA9PiAoe1xuICAgICAgICBpZDogcS5pZCxcbiAgICAgICAgYWN0aW9uX3R5cGU6IHEuYWN0aW9uX3R5cGUsXG4gICAgICAgIHBheWxvYWQ6IHEucGF5bG9hZCxcbiAgICAgIH0pKTtcbiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKGAke0FQSV9CQVNFfS9zeW5jYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczogYXV0aEhlYWRlcnMoKSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHRlbmFudF9pZDogdGVuYW50SWQsXG4gICAgICAgICAgb3V0bGV0X2lkOiBvdXRsZXRJZCxcbiAgICAgICAgICBkZXZpY2VfaWQ6IGRldmljZUlkLFxuICAgICAgICAgIGl0ZW1zLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgY29uc3QgZXJyQm9keSA9IGF3YWl0IHJlcy50ZXh0KCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJCb2R5IHx8IGBQdXNoIGZhaWxlZDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoZGF0YS52ZXJzaW9uX2lkICE9IG51bGwpIGF3YWl0IHNldE1heFZlcnNpb24oZGF0YS52ZXJzaW9uX2lkKTtcbiAgICAgIGZvciAoY29uc3QgciBvZiBkYXRhLnJlc3VsdHMgfHwgW10pIHtcbiAgICAgICAgaWYgKHIuc3RhdHVzID09PSAnYWNjZXB0ZWQnIHx8IHIuc3RhdHVzID09PSAnc3luY2VkJykge1xuICAgICAgICAgIGF3YWl0IGRiLnN5bmNfcXVldWUudXBkYXRlKHIucXVldWVfaWQsIHsgc3RhdHVzOiAnc3luY2VkJyB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChyLnN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICBhd2FpdCBkYi5zeW5jX3F1ZXVlLnVwZGF0ZShyLnF1ZXVlX2lkLCB7IHN0YXR1czogJ2ZhaWxlZCcsIGVycm9yX21lc3NhZ2U6IHIuZXJyb3IgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0aWxsUGVuZGluZyA9IGF3YWl0IGRiLnN5bmNfcXVldWUud2hlcmUoJ3N0YXR1cycpLmVxdWFscygncGVuZGluZycpLmNvdW50KCk7XG4gICAgICBzZXRQZW5kaW5nQ291bnQoc3RpbGxQZW5kaW5nKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zdCBtc2cgPSBlIGluc3RhbmNlb2YgRXJyb3IgPyBlLm1lc3NhZ2UgOiAnUHVzaCBmYWlsZWQnO1xuICAgICAgc2V0TGFzdEVycm9yKG1zZyk7XG4gICAgICBzZXRTeW5jU3RhdGUoJ2Vycm9yJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNldFN5bmNTdGF0ZSgnaWRsZScpO1xuICAgIGNvbnN0IHN0aWxsUGVuZGluZyA9IGF3YWl0IGRiLnN5bmNfcXVldWUud2hlcmUoJ3N0YXR1cycpLmVxdWFscygncGVuZGluZycpLmNvdW50KCk7XG4gICAgc2V0UGVuZGluZ0NvdW50KHN0aWxsUGVuZGluZyk7XG4gIH0sIFt0ZW5hbnRJZCwgb3V0bGV0SWQsIGRldmljZUlkLCBzZXRNYXhWZXJzaW9uXSk7XG5cbiAgY29uc3Qgc3luYyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBpZiAoIWVuYWJsZWQpIHJldHVybjtcbiAgICBhd2FpdCBwdWxsKHRydWUpO1xuICAgIGF3YWl0IHB1c2goKTtcbiAgICBhd2FpdCBwdWxsKHRydWUpO1xuICB9LCBbZW5hYmxlZCwgcHVsbCwgcHVzaF0pO1xuXG4gIC8vIFdoZW4gb25saW5lLCBkbyBhIGZ1bGwgcHVsbCBvbiBwYWdlIGxvYWQgc28gd2UgZ2V0IGFsbCBEQiByb3dzIChwcm9kdWN0cyB3aXRoIGxvdyB2ZXJzaW9uX2lkIGFyZSBuZXZlciBzZW50IG9uIGluY3JlbWVudGFsIHB1bGwpLlxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJyB8fCAhZW5hYmxlZCB8fCAhdGVuYW50SWQpIHJldHVybjtcbiAgICBpZiAod2luZG93Lm5hdmlnYXRvci5vbkxpbmUpIHtcbiAgICAgIHB1bGwodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHNcbiAgfSwgW3RlbmFudElkLCBlbmFibGVkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBjb25zdCBoYW5kbGVPbmxpbmUgPSAoKSA9PiB7XG4gICAgICBzZXRJc09ubGluZSh0cnVlKTtcbiAgICAgIGlmIChlbmFibGVkICYmIHRlbmFudElkKSBzeW5jKCk7XG4gICAgfTtcbiAgICBjb25zdCBoYW5kbGVPZmZsaW5lID0gKCkgPT4gc2V0SXNPbmxpbmUoZmFsc2UpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBoYW5kbGVPbmxpbmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgaGFuZGxlT2ZmbGluZSk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdvbmxpbmUnLCBoYW5kbGVPbmxpbmUpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCBoYW5kbGVPZmZsaW5lKTtcbiAgICB9O1xuICB9LCBbZW5hYmxlZCwgdGVuYW50SWQsIHN5bmNdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBjYW5jZWxsZWQgPSBmYWxzZTtcbiAgICBkYi5zeW5jX3F1ZXVlLndoZXJlKCdzdGF0dXMnKS5lcXVhbHMoJ3BlbmRpbmcnKS5jb3VudCgpLnRoZW4oKGMpID0+IHtcbiAgICAgIGlmICghY2FuY2VsbGVkKSBzZXRQZW5kaW5nQ291bnQoYyk7XG4gICAgfSk7XG4gICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBkYi5zeW5jX3F1ZXVlLndoZXJlKCdzdGF0dXMnKS5lcXVhbHMoJ3BlbmRpbmcnKS5jb3VudCgpLnRoZW4oKGMpID0+IHtcbiAgICAgICAgaWYgKCFjYW5jZWxsZWQpIHNldFBlbmRpbmdDb3VudChjKTtcbiAgICAgIH0pO1xuICAgIH0sIDIwMDApO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgaXNPbmxpbmUsXG4gICAgc3luY1N0YXRlLFxuICAgIGxhc3RFcnJvcixcbiAgICBwZW5kaW5nQ291bnQsXG4gICAgc3luYyxcbiAgICBwdWxsLFxuICAgIHB1c2gsXG4gIH07XG59XG4iXSwibmFtZXMiOlsidXNlQ2FsbGJhY2siLCJ1c2VFZmZlY3QiLCJ1c2VTdGF0ZSIsImRiIiwiZ2V0QXV0aFRva2VuIiwiU1lOQ19NRVRBX0tFWV9NQVhfVkVSU0lPTiIsIlNJTVVMQVRFX09GRkxJTkVfS0VZIiwiQVBJX0JBU0UiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsImdldFNpbXVsYXRlT2ZmbGluZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJhdXRoSGVhZGVycyIsInRva2VuIiwiaCIsInVzZVN5bmNNYW5hZ2VyIiwidGVuYW50SWQiLCJvdXRsZXRJZCIsImRldmljZUlkIiwiZW5hYmxlZCIsImlzT25saW5lIiwic2V0SXNPbmxpbmUiLCJ3aW5kb3ciLCJuYXZpZ2F0b3IiLCJvbkxpbmUiLCJzeW5jU3RhdGUiLCJzZXRTeW5jU3RhdGUiLCJsYXN0RXJyb3IiLCJzZXRMYXN0RXJyb3IiLCJwZW5kaW5nQ291bnQiLCJzZXRQZW5kaW5nQ291bnQiLCJnZXRNYXhWZXJzaW9uIiwicm93Iiwic3luY19tZXRhIiwiZ2V0IiwidiIsInZhbHVlIiwicGFyc2VJbnQiLCJzZXRNYXhWZXJzaW9uIiwidmVyc2lvbiIsInB1dCIsImtleSIsInB1bGwiLCJmb3JjZUZ1bGxTeW5jIiwidGFibGVzIiwibWF4VmVyIiwiaGFzTG9jYWxEYXRhIiwicHJvZHVjdHMiLCJ3aGVyZSIsImVxdWFscyIsImNvdW50IiwidXJsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicmVzIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwic2VydmVyX21heF92ZXJzaW9uX2lkIiwibGVuZ3RoIiwiZGVsZXRlZF9hdCIsInVwZGF0ZSIsImlkIiwidmVyc2lvbl9pZCIsInRlbmFudF9pZCIsInNrdSIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInByaWNlIiwiTnVtYmVyIiwiY3JlYXRlZF9hdCIsInVwZGF0ZWRfYXQiLCJpbnZlbnRvcnkiLCJwcm9kdWN0S2V5Iiwib3V0bGV0X2lkIiwicHJvZHVjdF9pZCIsImV4aXN0aW5nIiwidG9BcnJheSIsImUiLCJkZWxldGUiLCJxdWFudGl0eSIsInNhbGVzIiwiZGV2aWNlX2lkIiwic2Vzc2lvbl9pZCIsImRldmljZV90cmFuc2FjdGlvbl9pZCIsInRvdGFsX2Ftb3VudCIsInNhbGVfaXRlbXMiLCJzYWxlX2lkIiwidW5pdF9wcmljZSIsImxpbmVfdG90YWwiLCJwb3Nfc2Vzc2lvbnMiLCJ1c2VyX2lkIiwib3BlbmluZ19iYWxhbmNlIiwiY2xvc2luZ19iYWxhbmNlIiwiZXhwZWN0ZWRfYmFsYW5jZSIsIm9wZW5lZF9hdCIsImNsb3NlZF9hdCIsIm1zZyIsIm1lc3NhZ2UiLCJwdXNoIiwicGVuZGluZyIsInN5bmNfcXVldWUiLCJpdGVtcyIsIm1hcCIsInEiLCJhY3Rpb25fdHlwZSIsInBheWxvYWQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImVyckJvZHkiLCJ0ZXh0IiwiciIsInJlc3VsdHMiLCJxdWV1ZV9pZCIsImVycm9yX21lc3NhZ2UiLCJlcnJvciIsInN0aWxsUGVuZGluZyIsInN5bmMiLCJoYW5kbGVPbmxpbmUiLCJoYW5kbGVPZmZsaW5lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjYW5jZWxsZWQiLCJ0aGVuIiwiYyIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useSyncManager.ts\n"));

/***/ })

});